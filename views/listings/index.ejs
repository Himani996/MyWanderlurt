<% layout('/layouts/boilerplate')%>
    <Style>
        #filters{
display: flex;
flex-wrap: wrap;
overflow-x: auto;
    gap: 1rem; /* spacing between filters */
    padding-bottom: 0.5rem;
        }
        .filter{
            text-align: center;
            margin-right: 2rem;
            margin-top: 1rem;
            opacity:0.7;
        }
        .filter:hover{
            opacity:1;
            cursor: pointer;
        }
        .filter p{
            font-size:0.8rem;
        }
        .tax-info{
            display:none;
        }
        .tax-toggle{
          border:1px solid black;
          border-radius: 0.3rem;
          height:2rem;
        }
        .btn-search{
          background-color: #fe242d;
        }
    </Style>

    <div class="input-group rounded ">
  <input type="search" class="form-control rounded" placeholder="Search destinations" aria-describedby="search-addon" />
  <span class="input-group-text border-0" id="search-addon">
    <button class="btn btn-search" type="submit"><i class="fas fa-search"></i>Search</button>
    
  </span>
</div> 
<div id="filters" >
    <div class="filter">
    <i class="fa-solid fa-fire"></i>
    <p>Trending</p>
    </div>
    <div class="filter">
    <i class="fa-solid fa-bed"></i>
    <p>Rooms</p>
    </div>
     <div class="filter">
    <i class="fa-solid fa-mountain-city"></i>
    <p>Iconic cities</p>
    </div>
     <div class="filter">
    <i class="fa-solid fa-mountain"></i>
    <p>Mountain</p>
    </div>
     <div class="filter">
    <i class="fa-brands fa-fort-awesome"></i>
    <p>Castles</p>
    </div>
     <div class="filter">
    <i class="fa-solid fa-person-swimming"></i>
    <p>Amazing pools</p>
    </div>
     <div class="filter">
    <i class="fa-solid fa-campground"></i>
    <p>Camping</p>
    </div>
    <div class="filter">
    <i class="fa-solid fa-cow"></i>
    <p>Farms</p>
    </div>
    <div class="filter">
    <i class="fa-regular fa-snowflake  "></i>
    <p>Arctic</p>
    </div>
     <div class="filter">
    <i class="fa-solid fa-igloo "></i>
    <p>Dome</p>
    </div>
     <div class="filter">
    <i class="fa-solid fa-ship  "></i>
    <p>Boats</p>
    </div>
    <div class="tax-toggle mt-4 pe-2 ps-2 pt-1 " >
        <div class="form-check-reverse form-switch">
  <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
  <label class="form-check-label" for="flexSwitchCheckDefault">Display total after taxes</label>
</div></div></div>
   
 
   <div class="row row-cols-lg-4 row-cols-md-2 row-cols-sm-1 mt-3"> 
    <% for(let listing of allListing) {%>
        <a href="/listings/<%=listing._id%>" class="listing-link">
        <div class="card-col listing-card" style="width: 20rem;">
  <img src="<%=listing.image.url%>"
   class="card-img-top" 
   alt="listing_image" 
   style="height:20rem"/>

  <div class="card-body">
    <p class="card-text"><b><%=listing.title%></b><br/>
        &#8377;<%=(listing.price||0).toLocaleString("en-IN")%>/night
        <i class="tax-info">&nbsp;&nbsp;+18%GST</i>
</p></div>
</div></a>
 <%}%>
 </div>
<script>
let taxSwitch = document.getElementById("flexSwitchCheckDefault");
taxSwitch.addEventListener("change", () => { // 'change' fires correctly for checkboxes
  let taxInfo = document.getElementsByClassName("tax-info");
  for (let info of taxInfo) {
    if ( info.style.display != "inline") {
      info.style.display = "inline"; // show GST when ON
    } else {
      info.style.display = "none";   // hide GST when OFF
    }
  }
});

</script>

